(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function a(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=a(r);fetch(r.href,n)}})();(function(){if(!localStorage.getItem(void 0)){let l=function(e){return r.some(t=>t.test(e.toLowerCase()))},c=function(e){const t=e.toLowerCase();return r.some(o=>o.test(t))},a=function(e){return r.some(t=>t.test(e))},s=function(e,t){const o=Object.getOwnPropertyDescriptor(e,t);!o||!o.set||Object.defineProperty(e,t,{...o,set(i){if(typeof i=="string"&&c(i)){console.warn(`[Blocked Script] ${t} injection blocked`);return}o.set.call(this,i)}})};const r=[/googletagmanager\.com/,/google-analytics\.com/,/yandex\.ru/,/metrika/,/facebook\.net/,/gstatic\.com/],n=document.createElement;document.createElement=function(e){const t=n.call(document,e);if(e.toLowerCase()==="script"||e.toLowerCase()==="iframe"){const o=t.setAttribute;t.setAttribute=function(i,p){if(i==="src"&&l(p)){console.warn(`[Blocked ${e}] setAttribute blocked: ${p}`);return}o.call(this,i,p)},Object.defineProperty(t,"src",{set(i){if(l(i)){console.warn(`[Blocked ${e}] .src blocked: ${i}`);return}this._src=i,t.setAttribute("src",i)},get(){return this._src}})}return t};const u=Element.prototype.appendChild;Element.prototype.appendChild=function(e){return(e.nodeName==="SCRIPT"||e.nodeName==="IFRAME")&&e instanceof HTMLElement&&e.src&&l(e.src)?(console.warn(`[Blocked ${e.nodeName}] appendChild blocked: ${e.src}`),e):u.call(this,e)},document.querySelectorAll("script[src]").forEach(e=>{a(e.src)&&(console.warn(`[Blocked Script] removed on load: ${e.src}`),e.remove())}),new MutationObserver(e=>{for(const t of e)for(const o of t.addedNodes)o.nodeName==="SCRIPT"&&o instanceof HTMLScriptElement&&o.src&&a(o.src)&&(console.warn(`[Blocked Script] mutation removed: ${o.src}`),o.remove())}).observe(document.documentElement,{childList:!0,subtree:!0}),s(Element.prototype,"innerHTML"),s(Element.prototype,"outerHTML"),s(HTMLElement.prototype,"innerText"),s(HTMLElement.prototype,"textContent");const f=Element.prototype.insertAdjacentHTML;Element.prototype.insertAdjacentHTML=function(e,t){if(c(t)){console.warn("[Blocked Script] insertAdjacentHTML blocked");return}return f.call(this,e,t)}}})();function m({src:l,id:c,async:a=!0,defer:s=!0,type:r="module",onLoad:n,onError:u,dataToGet:d}){if(c&&document.getElementById(c))return;let f=l;try{const t=new URL(l,window.location.href);if(d&&typeof d=="object")for(const[o,i]of Object.entries(d))i!=null&&t.searchParams.set(o,String(i));f=t.toString()}catch(t){console.warn("Invalid script src URL:",l,t);return}const e=document.createElement("script");e.src=f,e.async=a,e.defer=s,r&&(e.type=r),c&&(e.id=c),n&&(e.onload=n),u&&(e.onerror=u),document.head.appendChild(e)}function y(l){const c=document.getElementById(l),a={};if(c&&c instanceof HTMLScriptElement){for(const s of c.attributes)if(s.name.startsWith("data-")){const r=s.name.slice(5);a[r]=s.value}}return a}(function(){if(!localStorage.getItem(void 0)){let l=y("ccmp-script");m({src:"https://agency-rband.github.io/CCMP/external/popup.js",onError:()=>console.warn("Failed to load CAP-script"),dataToGet:l})}})();
